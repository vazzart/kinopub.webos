{"version":3,"sources":["views/settings/settings.tsx","components/seo/seo.tsx","components/title/title.tsx","hooks/useApi.ts","hooks/useChangebleState.ts","components/button/button.tsx","components/checkbox/checkbox.tsx","hooks/useThrottledCallback.ts","components/accordion/accordion.tsx","components/radio/radio.tsx","components/select/select.tsx"],"names":["SettingBool","setting","onChange","className","defaultChecked","value","Bool","True","label","SettingList","options","useMemo","map","description","defaultValue","findIndex","selected","SettingsView","data","useApi","deviceInfo","saveDeviceSettingsAsync","useApiMutation","deactivate","useState","newSettings","setNewSettings","useStorageState","isHLSJSActive","setIsHLSJSActive","isAC3ByDefaultActive","setIsAC3ByDefaultActive","isForcedByDefaultActive","setIsForcedByDefaultActive","isPauseByOKClickActive","setIsPauseByOKClickActive","useDeviceInfo","software","hardware","boolSettings","filter","device","settings","key","listSettings","handleHLSJSToogle","useCallback","checked","handleAC3ByDefaultToogle","handleForcedByDefaultToogle","handlePauseByOKClickToogle","handleBoolSettingToggle","a","False","handleListSettingSelect","id","handleSaveClick","window","location","reload","handleLogoutClick","title","updated","icon","onClick","user","profile","name","username","Math","floor","subscription","days","Seo","props","Helmet","defaultTitle","titleTemplate","Title","children","cx","as","method","params","client","ApiClient","query","useQuery","useChangebleState","initialState","state","setState","useEffect","Button","iconOnly","autoFocus","wrapperRef","useRef","frameId","requestAnimationFrame","current","node","focus","cancelAnimationFrame","ref","role","Checkbox","disabled","inputRef","handleChange","e","target","handleKeyPress","isKey","click","component","onKeyPress","type","useThrottledCallback","func","wait","useBaseThrottledCallback","Accordion","open","onToggle","subtitle","visible","setVisible","handleClick","newVisible","handleClickThrottled","Radio","Select","closeOnChange","splitIn","setOpen","val","setVal","opts","Array","isArray","option","idx","selectedOption","find","o","handleChanged","handleChecked","opt"],"mappings":"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","file":"static/js/23.942bc5ea.chunk.js","sourcesContent":["import React, { useCallback, useMemo, useState } from 'react';\nimport filter from 'lodash/filter';\nimport findIndex from 'lodash/findIndex';\nimport map from 'lodash/map';\n\nimport { Bool, DeviceSettingBoolean, DeviceSettingList, DeviceSettingsParams } from 'api';\nimport Button from 'components/button';\nimport Checkbox from 'components/checkbox';\nimport Select from 'components/select';\nimport Seo from 'components/seo';\nimport Text from 'components/text';\nimport Title from 'components/title';\nimport useApi from 'hooks/useApi';\nimport useApiMutation from 'hooks/useApiMutation';\nimport useDeviceInfo from 'hooks/useDeviceInfo';\nimport useStorageState from 'hooks/useStorageState';\n\nconst SettingBool: React.FC<{ setting: DeviceSettingBoolean; onChange?: (checked: boolean) => void }> = ({ setting, onChange }) => {\n  return (\n    <Checkbox className=\"w-full\" defaultChecked={setting.value === Bool.True} onChange={onChange}>\n      {setting.label}\n    </Checkbox>\n  );\n};\n\nconst SettingList: React.FC<{ setting: DeviceSettingList; onChange?: (value: number) => void }> = ({ setting, onChange }) => {\n  const options = useMemo(\n    () => map(setting.value, (value) => `${value.label} ${value.description ? `(${value.description})` : ''}`),\n    [setting.value],\n  );\n\n  return (\n    <Select\n      defaultValue={findIndex(setting.value, (value) => value.selected === Bool.True)}\n      label={setting.label}\n      onChange={onChange}\n      options={options}\n    />\n  );\n};\n\nconst SettingsView: React.FC = () => {\n  const { data } = useApi('user');\n  const { data: deviceInfo } = useApi('deviceInfo');\n  const { saveDeviceSettingsAsync } = useApiMutation('saveDeviceSettings');\n  const { deactivate } = useApiMutation('deactivate');\n  const [newSettings, setNewSettings] = useState<DeviceSettingsParams>({});\n  const [isHLSJSActive, setIsHLSJSActive] = useStorageState<boolean>('is_hls.js_active');\n  const [isAC3ByDefaultActive, setIsAC3ByDefaultActive] = useStorageState<boolean>('is_ac3_by_default_active');\n  const [isForcedByDefaultActive, setIsForcedByDefaultActive] = useStorageState<boolean>('is_forced_by_default_active');\n  const [isPauseByOKClickActive, setIsPauseByOKClickActive] = useStorageState<boolean>('is_pause_by_ok_click_active');\n  const { software, hardware } = useDeviceInfo();\n\n  const boolSettings = useMemo(\n    () =>\n      filter(\n        map(deviceInfo?.device?.settings, (setting, key) => ({ ...setting, key })),\n        (setting: DeviceSettingBoolean) => typeof setting['type'] === 'undefined',\n      ) as (DeviceSettingBoolean & { key: string })[],\n    [deviceInfo?.device?.settings],\n  );\n  const listSettings = useMemo(\n    () =>\n      filter(\n        map(deviceInfo?.device?.settings, (setting, key) => ({ ...setting, key })),\n        (setting: DeviceSettingList) => setting['type'] === 'list',\n      ) as (DeviceSettingList & { key: string })[],\n    [deviceInfo?.device?.settings],\n  );\n\n  const handleHLSJSToogle = useCallback(\n    (checked: boolean) => {\n      setIsHLSJSActive(checked);\n    },\n    [setIsHLSJSActive],\n  );\n\n  const handleAC3ByDefaultToogle = useCallback(\n    (checked: boolean) => {\n      setIsAC3ByDefaultActive(checked);\n    },\n    [setIsAC3ByDefaultActive],\n  );\n\n  const handleForcedByDefaultToogle = useCallback(\n    (checked: boolean) => {\n      setIsForcedByDefaultActive(checked);\n    },\n    [setIsForcedByDefaultActive],\n  );\n\n  const handlePauseByOKClickToogle = useCallback(\n    (checked: boolean) => {\n      setIsPauseByOKClickActive(checked);\n    },\n    [setIsPauseByOKClickActive],\n  );\n\n  const handleBoolSettingToggle = useCallback(\n    (setting: typeof boolSettings[0]) => async (checked: boolean) => {\n      setNewSettings({ ...newSettings, [setting['key']]: checked ? Bool.True : Bool.False });\n    },\n    [newSettings],\n  );\n  const handleListSettingSelect = useCallback(\n    (setting: typeof listSettings[0]) => (value: number) => {\n      setNewSettings({ ...newSettings, [setting['key']]: setting.value[value].id });\n    },\n    [newSettings],\n  );\n\n  const handleSaveClick = useCallback(async () => {\n    await saveDeviceSettingsAsync([deviceInfo?.device.id!, newSettings]);\n\n    window.location.reload();\n  }, [newSettings, deviceInfo?.device, saveDeviceSettingsAsync]);\n  const handleLogoutClick = useCallback(() => {\n    deactivate([]);\n  }, [deactivate]);\n\n  return (\n    <>\n      <Seo title=\"Настройки устройства\" />\n      <div className=\"h-screen relative\">\n        <Title>Настройки устройства</Title>\n\n        <div className=\"flex flex-col\">\n          {deviceInfo?.device && (\n            <>\n              <div>\n                <div className=\"flex flex-wrap pb-4\" key={`bool-${deviceInfo?.device.updated}`}>\n                  {map(boolSettings, (setting) => (\n                    <div className=\"flex w-1/2 pr-4\" key={setting['key']}>\n                      <SettingBool setting={setting} onChange={handleBoolSettingToggle(setting)} />\n                    </div>\n                  ))}\n                </div>\n                <div className=\"flex flex-wrap pb-4\">\n                  <div className=\"flex w-1/2 pr-4\" key=\"use-hls.js\">\n                    <Checkbox className=\"w-full\" defaultChecked={isHLSJSActive !== false} onChange={handleHLSJSToogle}>\n                      Использовать HLS.js\n                    </Checkbox>\n                  </div>\n                  <div className=\"flex w-1/2 pr-4\" key=\"use-ac3_by_default\">\n                    <Checkbox className=\"w-full\" defaultChecked={isAC3ByDefaultActive} onChange={handleAC3ByDefaultToogle}>\n                      AC3 аудио по умолчанию\n                    </Checkbox>\n                  </div>\n                  <div className=\"flex w-1/2 pr-4\">\n                    <Checkbox className=\"w-full\" defaultChecked={isPauseByOKClickActive} onChange={handlePauseByOKClickToogle}>\n                      Пауза по клику на ОК\n                    </Checkbox>\n                  </div>\n                  <div className=\"flex w-1/2 pr-4\" key=\"use-forced_by_default\">\n                    <Checkbox className=\"w-full\" defaultChecked={isForcedByDefaultActive} onChange={handleForcedByDefaultToogle}>\n                      Forced субтитры по умолчанию\n                    </Checkbox>\n                  </div>\n                </div>\n                <div className=\"flex flex-wrap pb-4\" key={`list-${deviceInfo?.device.updated}`}>\n                  {map(listSettings, (setting) => (\n                    <div className=\"flex w-1/2 pr-4\" key={setting['key']}>\n                      <SettingList setting={setting} onChange={handleListSettingSelect(setting)} />\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"flex my-8\">\n                <Button icon=\"done\" onClick={handleSaveClick}>\n                  Сохранить\n                </Button>\n              </div>\n            </>\n          )}\n        </div>\n\n        <div className=\"flex justify-between absolute bottom-0 left-0 right-0 py-2\">\n          <div>\n            <Text>Пользователь</Text>\n            <div className=\"flex items-center\">\n              {data?.user && (\n                <Text className=\"mr-4\">\n                  {data.user.profile.name || data.user.username} ({Math.floor(data.user.subscription.days)} дн.)\n                </Text>\n              )}\n\n              <Button icon=\"logout\" onClick={handleLogoutClick}>\n                Выход\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"flex flex-col items-end pr-4\">\n            <Text>{hardware}</Text>\n            <Text>{software}</Text>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default SettingsView;\n","import { Helmet, HelmetProps } from 'react-helmet';\n\ntype Props = {} & HelmetProps;\n\nconst Seo: React.FC<Props> = (props) => {\n  return <Helmet defaultTitle=\"Unknown\" titleTemplate=\"%s | Kinopub WebOS\" {...props} />;\n};\n\nexport default Seo;\n","import cx from 'classnames';\n\nimport Text, { TextProps } from 'components/text';\n\ntype Props = {} & TextProps;\n\nconst Title: React.FC<Props> = ({ children, className, ...props }) => {\n  if (!children) {\n    return null;\n  }\n\n  return (\n    <Text {...props} className={cx('flex justify-between items-center m-1 mb-3 min-h-9', className)} as=\"div\">\n      {children}\n    </Text>\n  );\n};\n\nexport default Title;\n","import { useMemo } from 'react';\nimport { UseQueryOptions, useQuery } from 'react-query';\n\nimport ApiClient from 'api';\n\ntype Unpromise<T> = T extends Promise<infer U> ? U : T;\n\nexport type Methods = {\n  [method in keyof ApiClient]: ApiClient[method] extends Function ? Unpromise<ReturnType<ApiClient[method]>> : never;\n};\n\nexport type Method = keyof ApiClient & string;\n\nfunction useApi<T extends Method>(\n  method: T,\n  params: Parameters<ApiClient[T]> = [] as Parameters<ApiClient[T]>,\n  options?: UseQueryOptions<Methods[T]>,\n) {\n  const client = useMemo(() => new ApiClient(), []);\n  const query = useQuery<Methods[T]>(\n    [method, ...params],\n    () =>\n      // @ts-expect-error\n      client[method](...params) as Methods[T],\n    options,\n  );\n\n  return query;\n}\n\nexport default useApi;\n","import { useEffect, useState } from 'react';\n\nfunction useChangebleState<T>(initialState?: T) {\n  const [state, setState] = useState(initialState);\n\n  useEffect(() => {\n    setState(initialState);\n  }, [initialState]);\n\n  return [state, setState] as const;\n}\n\nexport default useChangebleState;\n","import { useEffect, useRef } from 'react';\nimport cx from 'classnames';\n\nimport Icon from 'components/icon';\nimport Spottable from 'components/spottable';\n\ntype Props = {\n  icon?: string;\n  iconOnly?: boolean;\n  autoFocus?: boolean;\n  className?: string;\n} & React.ComponentProps<typeof Spottable>;\n\nconst Button: React.FC<Props> = ({ children, icon, iconOnly = !children, autoFocus, className, ...props }) => {\n  const wrapperRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    let frameId: number;\n\n    if (autoFocus) {\n      frameId = requestAnimationFrame(() => {\n        // @ts-expect-error\n        wrapperRef.current?.node?.focus();\n      });\n    }\n\n    return () => {\n      if (frameId) {\n        cancelAnimationFrame(frameId);\n      }\n    };\n  }, [wrapperRef, autoFocus]);\n\n  return (\n    <Spottable\n      {...props}\n      ref={wrapperRef}\n      className={cx('text-gray-200 whitespace-nowrap cursor-pointer rounded px-2 py-1', className)}\n      role=\"button\"\n    >\n      <div className=\"flex items-center\">\n        {icon && <Icon className={cx({ 'mr-2': !iconOnly })} name={icon} />}\n        {!iconOnly && children}\n      </div>\n    </Spottable>\n  );\n};\n\nexport default Button;\n","import { useCallback, useRef } from 'react';\nimport React from 'react';\nimport cx from 'classnames';\n\nimport Spottable from 'components/spottable';\n\nimport { isKey } from 'utils/keyboard';\n\nexport type CheckboxProps = {\n  defaultChecked?: boolean;\n  checked?: boolean;\n  onChange?: (checked: boolean, e: React.ChangeEvent<HTMLInputElement>) => void;\n  className?: string;\n  type?: string;\n  disabled?: boolean;\n} & Omit<React.HTMLAttributes<HTMLInputElement>, 'onChange'>;\n\nconst Checkbox: React.FC<CheckboxProps> = ({ defaultChecked, checked, onChange, className, children, disabled, ...props }) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const handleChange = useCallback<React.ChangeEventHandler<HTMLInputElement>>(\n    (e) => {\n      onChange?.(e.target.checked, e);\n    },\n    [onChange],\n  );\n  const handleKeyPress = useCallback((e: KeyboardEvent) => {\n    if (isKey(e, 'Enter')) {\n      inputRef.current?.click();\n    }\n  }, []);\n\n  return (\n    <Spottable\n      component=\"label\"\n      className={cx('text-gray-200 p-2', className)}\n      // @ts-expect-error\n      onKeyPress={handleKeyPress}\n      role=\"button\"\n      disabled={disabled}\n    >\n      <div className=\"inline-flex items-center cursor-pointer\">\n        <input\n          type=\"checkbox\"\n          {...props}\n          ref={inputRef}\n          className=\"inline-block w-4 h-4\"\n          defaultChecked={defaultChecked}\n          checked={checked}\n          onChange={handleChange}\n          disabled={disabled}\n        />\n        <span className=\"inline-block ml-2 whitespace-nowrap\">{children}</span>\n      </div>\n    </Spottable>\n  );\n};\n\nexport default Checkbox;\n","import { useThrottledCallback as useBaseThrottledCallback } from 'use-debounce';\nimport type { CallOptions } from 'use-debounce/lib/useDebouncedCallback';\n\nfunction useThrottledCallback<T extends (...args: any[]) => ReturnType<T>>(func: T, wait: number = 500, options?: CallOptions) {\n  return useBaseThrottledCallback(func, wait, options);\n}\n\nexport default useThrottledCallback;\n","import { useCallback } from 'react';\nimport cx from 'classnames';\n\nimport Icon from 'components/icon';\nimport Spottable from 'components/spottable';\nimport Text from 'components/text';\nimport useChangebleState from 'hooks/useChangebleState';\nimport useThrottledCallback from 'hooks/useThrottledCallback';\n\ntype Props = {\n  title: string;\n  subtitle?: string;\n  className?: string;\n  open?: boolean;\n  disabled?: boolean;\n  onToggle?: (open: boolean) => void;\n};\n\nconst Accordion: React.FC<Props> = ({ open, onToggle, title, subtitle, className, children, disabled }) => {\n  const [visible, setVisible] = useChangebleState(open);\n\n  const handleClick = useCallback(() => {\n    if (!disabled) {\n      const newVisible = !visible;\n      onToggle?.(newVisible);\n      setVisible(newVisible);\n    }\n  }, [disabled, visible, setVisible, onToggle]);\n\n  const handleClickThrottled = useThrottledCallback(handleClick);\n\n  return (\n    <div className=\"flex flex-col w-full\">\n      <Spottable onClick={handleClickThrottled} className={cx('p-1 cursor-pointer', className)} disabled={disabled}>\n        <div className=\"flex flex-col\">\n          <div className=\"flex items-center\">\n            <Text>{title}</Text>\n\n            {!disabled && <Icon name={visible ? 'expand_less' : 'expand_more'} />}\n          </div>\n          {!visible && subtitle && <Text className=\"mt-2\">{subtitle}</Text>}\n        </div>\n      </Spottable>\n      {visible && children}\n    </div>\n  );\n};\n\nexport default Accordion;\n","import React from 'react';\n\nimport Checkbox, { CheckboxProps } from 'components/checkbox';\n\ntype Props = {} & CheckboxProps;\n\nconst Radio: React.FC<Props> = (props) => {\n  return <Checkbox {...props} type=\"radio\" />;\n};\n\nexport default Radio;\n","import { useCallback, useMemo, useState } from 'react';\nimport map from 'lodash/map';\n\nimport Accordion from 'components/accordion';\nimport Radio from 'components/radio';\nimport useChangebleState from 'hooks/useChangebleState';\n\ntype Option<T = any> = {\n  title: string;\n  value: T;\n};\n\ntype Props<T = any> = {\n  label: string;\n  options: Option<T>[] | string[];\n  value?: T;\n  defaultValue?: T;\n  onChange?: (value: T) => void;\n  closeOnChange?: boolean;\n  className?: string;\n  splitIn?: 2 | 3 | 4 | 5 | 6;\n  disabled?: boolean;\n};\n\nconst Select: React.FC<Props> = ({ label, options, defaultValue, value, onChange, closeOnChange = true, className, splitIn, disabled }) => {\n  const [open, setOpen] = useState(false);\n  const [val, setVal] = useChangebleState(value || defaultValue);\n  const opts = useMemo(\n    () =>\n      Array.isArray(options) ? options.map((option, idx) => (typeof option === 'object' ? option : { title: option, value: idx })) : [],\n    [options],\n  );\n  const selectedOption = useMemo(() => opts.find((o) => o.value === val), [opts, val]);\n\n  const handleChanged = useCallback(\n    (value) => {\n      setVal(value);\n      onChange?.(value);\n\n      if (closeOnChange) {\n        setOpen(false);\n      }\n    },\n    [setVal, onChange, closeOnChange],\n  );\n  const handleChecked = useCallback(\n    (option: Option) => (checked: boolean) => {\n      if (checked) {\n        handleChanged(option.value);\n      }\n    },\n    [handleChanged],\n  );\n\n  return (\n    <Accordion open={open} onToggle={setOpen} title={label} subtitle={selectedOption?.title} className={className} disabled={disabled}>\n      <div className=\"flex flex-wrap\">\n        {map(opts, (opt) => (\n          <Radio\n            key={opt.value}\n            className={splitIn ? `w-1/${splitIn}` : 'w-full'}\n            checked={opt.value === val}\n            onChange={handleChecked(opt)}\n          >\n            {opt.title}\n          </Radio>\n        ))}\n      </div>\n    </Accordion>\n  );\n};\n\nexport default Select;\n"],"sourceRoot":""}
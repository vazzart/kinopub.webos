(this["webpackJsonpkinopub.webos"]=this["webpackJsonpkinopub.webos"]||[]).push([[17],{1108:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var c=n(51),r=n(2),i=n(32),o=n(199),a=n.n(o),u=n(968),s=n(265),l=n(898),f=n(253),d=n(107),b=n(46),j=n.n(b),v=n(254),h=n(902),O=n(6),p=n(906),x=n(3),g=function(e){var t=e.collection,n=e.className,c=Object(i.h)(),o=Object(r.useMemo)((function(){return(null===t||void 0===t?void 0:t.views)&&Object(p.a)(null===t||void 0===t?void 0:t.views)||""}),[null===t||void 0===t?void 0:t.views]),a=Object(r.useCallback)((function(){(null===t||void 0===t?void 0:t.id)&&c.push(Object(O.b)(O.a.Collection,{collectionId:t.id}),{collection:t,title:t.title})}),[t,c]);return Object(x.jsx)(h.a,{onClick:a,source:null===t||void 0===t?void 0:t.posters.medium,caption:null===t||void 0===t?void 0:t.title,className:j()("h-72",n),children:o&&Object(x.jsxs)("div",{className:"absolute top-2 right-2 h-6 pr-2 text-xs text-gray-200 bg-black bg-opacity-50 rounded flex items-center",children:[Object(x.jsx)(v.a,{name:"visibility"}),o]})})},m=n(899),w=n(901),N=function(e){var t=e.title,n=e.collections,c=e.loading,r=e.onScrollToEnd,i=e.scrollable,o=void 0===i||i,u=Object(x.jsxs)("div",{children:[Object(x.jsx)(w.a,{children:t}),Object(x.jsxs)("div",{className:"flex flex-wrap pr-2",children:[a()(n,(function(e){return Object(x.jsx)(g,{collection:e},e.id)})),c&&a()(Object(d.a)(new Array(15)),(function(e,t){return Object(x.jsx)(g,{},t)}))]})]});return o?Object(x.jsx)(m.a,{onScrollToEnd:r,children:u}):u},P=n(917),y=function(e){var t=e.title,n=e.queryResult,r=e.processItems,i=Object(P.a)(n,r),o=Object(c.a)(i,3),a=o[0],u=o[1],s=o[2];return Object(x.jsx)(N,{title:t,collections:a,loading:u,onScrollToEnd:s})},C=n(926),k={created:"\u041d\u043e\u0432\u044b\u0435",watchers:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435",views:"\u041f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c\u044b\u0435"},M=function(){var e=Object(i.j)().collectionType,t=void 0===e?"created":e,n=Object(r.useState)(""),o=Object(c.a)(n,2),d=o[0],b=o[1],j=Object(C.a)("collections",[d,"".concat(t,"-")]),v=function(e){return(e?k[e]:e)||""}(t),h=Object(r.useCallback)((function(e){b(e)}),[b]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.a,{title:"\u041f\u043e\u0434\u0431\u043e\u0440\u043a\u0438: ".concat(v)}),Object(x.jsx)(y,{title:Object(x.jsxs)("div",{className:"w-full",children:[Object(x.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[Object(x.jsx)(f.a,{children:v}),Object(x.jsx)("div",{className:"flex",children:a()(k,(function(e,n){return Object(x.jsx)(s.a,{className:"mr-2",replace:!0,active:t===n,href:Object(O.b)(O.a.Collections,{collectionType:n}),children:e},n)}))})]}),Object(x.jsx)("div",{className:"mr-2",children:Object(x.jsx)(u.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0438...",value:d,onChange:h})})]}),queryResult:j})]})}},898:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(13),r=n(905),i=n(3),o=function(e){return Object(i.jsx)(r.a,Object(c.a)({defaultTitle:"Unknown",titleTemplate:"%s | Kinopub WebOS"},e))}},899:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var c=n(13),r=n(52),i=n(2),o=n(46),a=n.n(o),u=n(51),s=n(108),l=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{disconnectOnLeave:!1},r=t.onEnterViewport,o=t.onLeaveViewport,a=Object(i.useState)(),l=Object(u.a)(a,2),f=l[1],d=Object(i.useRef)(null),b=Object(i.useRef)(!1),j=Object(i.useRef)(!1),v=Object(i.useRef)(0),h=Object(i.useRef)(0),O=Object(i.useCallback)((function(){if(e.current&&d.current){var t=Object(s.findDOMNode)(e.current);t&&d.current.observe(t)}}),[e,d]),p=Object(i.useCallback)((function(){if(e.current&&d.current){var t=Object(s.findDOMNode)(e.current);t&&(d.current.unobserve(t),d.current.disconnect(),d.current=null)}}),[e,d]),x=Object(i.useCallback)((function(e){var t=e[0]||{},n=t.isIntersecting,i=t.intersectionRatio,a="undefined"!==typeof n?n:i>0;if(!j.current&&a)return j.current=!0,null===r||void 0===r||r(),v.current+=1,b.current=a,void f(a);j.current&&!a&&(j.current=!1,null===o||void 0===o||o(),c.disconnectOnLeave&&d.current&&d.current.disconnect(),h.current+=1,b.current=a,f(a))}),[d,c.disconnectOnLeave,r,o]),g=Object(i.useCallback)((function(){d.current||(d.current=new IntersectionObserver(x,n))}),[d,n,x]);return Object(i.useEffect)((function(){return g(),O(),function(){p()}}),[g,O,p]),{inViewport:b.current,enterCount:v.current,leaveCount:h.current}},f=n(998);var d=function(e){var t=Object(f.a)();return Object(i.useMemo)((function(){return"".concat(e,"-").concat(t)}),[e,t])},b=n(3),j=["children","className","onScrollToEnd"],v=Object(i.createContext)({}),h=function(e){var t=e.children,n=e.className,o=e.onScrollToEnd,u=Object(r.a)(e,j),s=Object(i.useRef)(null),f=d("scrollable"),h=Object(i.useMemo)((function(){return{id:f}}),[f]);return l(s,{onEnterViewport:o}),Object(b.jsxs)("div",Object(c.a)(Object(c.a)({className:a()("overflow-y-auto h-full",n)},u),{},{id:f,children:[Object(b.jsx)(v.Provider,{value:h,children:t}),o&&Object(b.jsx)("div",{className:"h-40",ref:s})]}))}},901:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(13),r=n(52),i=n(46),o=n.n(i),a=n(253),u=n(3),s=["children","className"],l=function(e){var t=e.children,n=e.className,i=Object(r.a)(e,s);return t?Object(u.jsx)(a.a,Object(c.a)(Object(c.a)({},i),{},{className:o()("flex justify-between items-center mx-2 my-1 mb-3 min-h-9",n),as:"div",children:t})):null}},902:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(13),r=n(52),i=n(46),o=n.n(i),a=n(256),u=n(3),s=["className","wrapperClassName","source","caption","children"],l=function(e){var t=e.className,n=e.wrapperClassName,i=e.source,l=e.caption,f=e.children,d=Object(r.a)(e,s);return Object(u.jsxs)(a.a,Object(c.a)(Object(c.a)({},d),{},{className:o()("rounded-xl w-1/5 cursor-pointer",n),children:[Object(u.jsxs)("div",{className:o()("h-40 m-1 flex flex-col relative",t),children:[Object(u.jsx)("img",{loading:"lazy",className:"w-full h-full object-cover rounded-xl border-2 border-gray-300 bg-gray-300",src:i,alt:l}),f]}),l&&Object(u.jsx)("div",{className:"px-2",children:Object(u.jsx)("p",{className:"text-gray-200 text-sm text-center overflow-hidden overflow-ellipsis whitespace-nowrap",children:l})})]}))}},906:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(929),r=n.n(c);function i(e){return r()(e)}},912:function(e,t,n){var c=n(379),r=n(918);e.exports=function(e,t){return e&&e.length?r(e,c(t,2)):[]}},917:function(e,t,n){"use strict";var c=n(51),r=n(2),i=n(910),o=n.n(i),a=n(928),u=n.n(a),s=n(912),l=n.n(s);t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"items",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id",a=e.data,s=e.isLoading,f=e.isFetchingNextPage,d=e.fetchNextPage,b=Object(r.useState)(!1),j=Object(c.a)(b,2),v=j[0],h=j[1],O=Object(r.useMemo)((function(){return l()(o()(u()(null===a||void 0===a?void 0:a.pages,(function(e){return e[n]}))),i)}),[null===a||void 0===a?void 0:a.pages,n,i]),p=Object(r.useMemo)((function(){return t?t(O):O}),[O,t]),x=Object(r.useCallback)((function(){v&&(d(),h(!1))}),[v,d]);return Object(r.useEffect)((function(){h(!0)}),[O.length]),[p,s||f,x]}},918:function(e,t,n){var c=n(386),r=n(919),i=n(923),o=n(387),a=n(924),u=n(381);e.exports=function(e,t,n){var s=-1,l=r,f=e.length,d=!0,b=[],j=b;if(n)d=!1,l=i;else if(f>=200){var v=t?null:a(e);if(v)return u(v);d=!1,l=o,j=new c}else j=t?[]:b;e:for(;++s<f;){var h=e[s],O=t?t(h):h;if(h=n||0!==h?h:0,d&&O===O){for(var p=j.length;p--;)if(j[p]===O)continue e;t&&j.push(O),b.push(h)}else l(j,O,n)||(j!==b&&j.push(O),b.push(h))}return b}},919:function(e,t,n){var c=n(920);e.exports=function(e,t){return!!(null==e?0:e.length)&&c(e,t,0)>-1}},920:function(e,t,n){var c=n(915),r=n(921),i=n(922);e.exports=function(e,t,n){return t===t?i(e,t,n):c(e,r,n)}},921:function(e,t){e.exports=function(e){return e!==e}},922:function(e,t){e.exports=function(e,t,n){for(var c=n-1,r=e.length;++c<r;)if(e[c]===t)return c;return-1}},923:function(e,t){e.exports=function(e,t,n){for(var c=-1,r=null==e?0:e.length;++c<r;)if(n(t,e[c]))return!0;return!1}},924:function(e,t,n){var c=n(388),r=n(925),i=n(381),o=c&&1/i(new c([,-0]))[1]==1/0?function(e){return new c(e)}:r;e.exports=o},925:function(e,t){e.exports=function(){}},926:function(e,t,n){"use strict";var c=n(13),r=n(107),i=n(2),o=n(967),a=n(252);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,u=Object(i.useMemo)((function(){return new a.c}),[]),s=Object(o.a)([e].concat(Object(r.a)(t)),(function(n){var c=n.pageParam;return u[e].apply(u,Object(r.a)(t).concat([c]))}),Object(c.a)({getNextPageParam:function(e){var t;return(null===e||void 0===e||null===(t=e.pagination)||void 0===t?void 0:t.current)+1||1}},n));return s}},928:function(e,t,n){var c=n(931),r=n(199);e.exports=function(e,t){return c(r(e,t),1)}},931:function(e,t,n){var c=n(391),r=n(932);e.exports=function e(t,n,i,o,a){var u=-1,s=t.length;for(i||(i=r),a||(a=[]);++u<s;){var l=t[u];n>0&&i(l)?n>1?e(l,n-1,i,o,a):c(a,l):o||(a[a.length]=l)}return a}},932:function(e,t,n){var c=n(156),r=n(261),i=n(62),o=c?c.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||r(e)||!!(o&&e&&e[o])}},967:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(7),r=n(31),i=n(933),o=n(264),a=function(e){function t(t,n){return e.call(this,t,n)||this}Object(r.a)(t,e);var n=t.prototype;return n.bindMethods=function(){e.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},n.setOptions=function(t){e.prototype.setOptions.call(this,Object(c.a)({},t,{behavior:Object(o.c)()}))},n.getOptimisticResult=function(t){return t.behavior=Object(o.c)(),e.prototype.getOptimisticResult.call(this,t)},n.fetchNextPage=function(e){return this.fetch({cancelRefetch:!0,throwOnError:null==e?void 0:e.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:null==e?void 0:e.pageParam}}})},n.fetchPreviousPage=function(e){return this.fetch({cancelRefetch:!0,throwOnError:null==e?void 0:e.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:null==e?void 0:e.pageParam}}})},n.createResult=function(t,n){var r,i,a,u,s,l,f=t.state,d=e.prototype.createResult.call(this,t,n);return Object(c.a)({},d,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Object(o.a)(n,null==(r=f.data)?void 0:r.pages),hasPreviousPage:Object(o.b)(n,null==(i=f.data)?void 0:i.pages),isFetchingNextPage:f.isFetching&&"forward"===(null==(a=f.fetchMeta)||null==(u=a.fetchMore)?void 0:u.direction),isFetchingPreviousPage:f.isFetching&&"backward"===(null==(s=f.fetchMeta)||null==(l=s.fetchMore)?void 0:l.direction)})},t}(i.a),u=n(5),s=n(907);function l(e,t,n){var c=Object(u.l)(e,t,n);return Object(s.a)(c,a)}},968:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var c=n(13),r=n(52),i=n(2),o=n(108),a=n(975),u=n.n(a),s=n(46),l=n.n(s),f=n(3),d=["className","onChange","autoFocus"],b=function(e){var t=e.className,n=e.onChange,a=e.autoFocus,s=Object(r.a)(e,d),b=Object(i.useRef)(null),j=Object(i.useCallback)((function(e){var t=e.value;null===n||void 0===n||n(t)}),[n]);return Object(i.useEffect)((function(){var e;return a&&(e=requestAnimationFrame((function(){var e,t=Object(o.findDOMNode)(b.current);null===t||void 0===t||null===(e=t.querySelector("input"))||void 0===e||e.focus()}))),function(){e&&cancelAnimationFrame(e)}}),[b,a]),Object(f.jsx)(u.a,Object(c.a)(Object(c.a)({},s),{},{ref:b,className:l()("w-full",t),onChange:j}))}}}]);
//# sourceMappingURL=17.44fe89c5.chunk.js.map
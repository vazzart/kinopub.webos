(this["webpackJsonpkinopub.webos"]=this["webpackJsonpkinopub.webos"]||[]).push([[20],{1118:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var c=n(13),r=n(2),a=n(32),u=n(966),o=n(898),i=n(946),l=n(3),s=function(){var e=Object(a.h)(),t=(Object(a.i)().state||{}).channel,n=Object(r.useMemo)((function(){return{title:t.title,poster:t.logos.m,sources:Object(i.b)([{url:t.stream}])}}),[t]),s=Object(r.useCallback)((function(){e.goBack()}),[e]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(o.a,{title:"\u041a\u0430\u043d\u0430\u043b: ".concat(t.title)}),Object(l.jsx)(u.a,Object(c.a)(Object(c.a)({},n),{},{onEnded:s}))]})}},898:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var c=n(13),r=n(905),a=n(3),u=function(e){return Object(a.jsx)(r.a,Object(c.a)({defaultTitle:"Unknown",titleTemplate:"%s | Kinopub WebOS"},e))}},899:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var c=n(13),r=n(52),a=n(2),u=n(46),o=n.n(u),i=n(51),l=n(108),s=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{disconnectOnLeave:!1},r=t.onEnterViewport,u=t.onLeaveViewport,o=Object(a.useState)(),s=Object(i.a)(o,2),b=s[1],d=Object(a.useRef)(null),f=Object(a.useRef)(!1),j=Object(a.useRef)(!1),O=Object(a.useRef)(0),v=Object(a.useRef)(0),m=Object(a.useCallback)((function(){if(e.current&&d.current){var t=Object(l.findDOMNode)(e.current);t&&d.current.observe(t)}}),[e,d]),p=Object(a.useCallback)((function(){if(e.current&&d.current){var t=Object(l.findDOMNode)(e.current);t&&(d.current.unobserve(t),d.current.disconnect(),d.current=null)}}),[e,d]),k=Object(a.useCallback)((function(e){var t=e[0]||{},n=t.isIntersecting,a=t.intersectionRatio,o="undefined"!==typeof n?n:a>0;if(!j.current&&o)return j.current=!0,null===r||void 0===r||r(),O.current+=1,f.current=o,void b(o);j.current&&!o&&(j.current=!1,null===u||void 0===u||u(),c.disconnectOnLeave&&d.current&&d.current.disconnect(),v.current+=1,f.current=o,b(o))}),[d,c.disconnectOnLeave,r,u]),h=Object(a.useCallback)((function(){d.current||(d.current=new IntersectionObserver(k,n))}),[d,n,k]);return Object(a.useEffect)((function(){return h(),m(),function(){p()}}),[h,m,p]),{inViewport:f.current,enterCount:O.current,leaveCount:v.current}},b=n(998);var d=function(e){var t=Object(b.a)();return Object(a.useMemo)((function(){return"".concat(e,"-").concat(t)}),[e,t])},f=n(3),j=["children","className","onScrollToEnd"],O=Object(a.createContext)({}),v=function(e){var t=e.children,n=e.className,u=e.onScrollToEnd,i=Object(r.a)(e,j),l=Object(a.useRef)(null),b=d("scrollable"),v=Object(a.useMemo)((function(){return{id:b}}),[b]);return s(l,{onEnterViewport:u}),Object(f.jsxs)("div",Object(c.a)(Object(c.a)({className:o()("overflow-y-auto h-full",n)},i),{},{id:b,children:[Object(f.jsx)(O.Provider,{value:v,children:t}),u&&Object(f.jsx)("div",{className:"h-40",ref:l})]}))}},900:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var c=n(13),r=n(52),a=n(2),u=n(46),o=n.n(u),i=n(254),l=n(256),s=n(3),b=["children","icon","iconOnly","autoFocus","className"],d=function(e){var t=e.children,n=e.icon,u=e.iconOnly,d=void 0===u?!t:u,f=e.autoFocus,j=e.className,O=Object(r.a)(e,b),v=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e;return f&&(e=requestAnimationFrame((function(){var e,t;null===(e=v.current)||void 0===e||null===(t=e.node)||void 0===t||t.focus()}))),function(){e&&cancelAnimationFrame(e)}}),[v,f]),Object(s.jsx)(l.a,Object(c.a)(Object(c.a)({},O),{},{ref:v,className:o()("text-gray-200 whitespace-nowrap cursor-pointer rounded px-2 py-1",j),role:"button",children:Object(s.jsxs)("div",{className:"flex items-center",children:[n&&Object(s.jsx)(i.a,{className:o()({"mr-2":!d}),name:n}),!d&&t]})}))}},909:function(e,t,n){"use strict";var c=n(51),r=n(2);t.a=function(e){var t=Object(r.useState)(e),n=Object(c.a)(t,2),a=n[0],u=n[1];return Object(r.useEffect)((function(){u(e)}),[e]),[a,u]}},913:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(13),r=n(52),a=n(2),u=n(900),o=n(3),i=["defaultChecked","checked","onChange","className","children","disabled"],l=function(e){var t=e.defaultChecked,n=e.checked,l=e.onChange,s=e.className,b=e.children,d=e.disabled,f=Object(r.a)(e,i),j=Object(a.useRef)(null),O=Object(a.useCallback)((function(e){null===l||void 0===l||l(e.target.checked,e)}),[l]),v=Object(a.useCallback)((function(){var e;null===(e=j.current)||void 0===e||e.click()}),[]);return Object(o.jsxs)(u.a,{className:s,onClick:v,disabled:d,children:[Object(o.jsx)("input",Object(c.a)(Object(c.a)({type:"checkbox"},f),{},{ref:j,className:"inline-block w-4 h-4",defaultChecked:t,checked:n,onChange:O,disabled:d})),Object(o.jsx)("span",{className:"inline-block ml-2 whitespace-nowrap",children:b})]})}},916:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(13),r=n(941),a=n.n(r),u=n(3),o=a()({enterTo:"default-element",defaultElement:".spottable",selector:".spottable",overflow:!0,preserveId:!0},(function(e){return Object(u.jsx)("div",Object(c.a)({},e))}))},927:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var c=n(51),r=n(2),a=n(900),u=n(254),o=n(253),i=n(909),l=n(1104);var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0;return Object(l.a)(e,t,n)},b=n(3),d=function(e){var t=e.open,n=e.onToggle,l=e.title,d=e.subtitle,f=e.className,j=e.children,O=e.disabled,v=Object(i.a)(t),m=Object(c.a)(v,2),p=m[0],k=m[1],h=Object(r.useCallback)((function(){if(!O){var e=!p;null===n||void 0===n||n(e),k(e)}}),[O,p,k,n]),g=s(h);return Object(b.jsxs)("div",{className:"flex flex-col w-full",children:[Object(b.jsx)(a.a,{onClick:g,className:f,disabled:O,children:Object(b.jsxs)("div",{className:"flex flex-col",children:[Object(b.jsxs)("div",{className:"flex items-center",children:[Object(b.jsx)(o.a,{children:l}),!O&&Object(b.jsx)(u.a,{name:p?"expand_less":"expand_more"})]}),!p&&d&&Object(b.jsx)(o.a,{className:"mt-2",children:d})]})}),p&&j]})}},934:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var c=n(51),r=n(2),a=n(199),u=n.n(a),o=n(927),i=n(13),l=n(913),s=n(3),b=function(e){return Object(s.jsx)(l.a,Object(i.a)(Object(i.a)({},e),{},{type:"radio"}))},d=n(909),f=function(e){var t=e.label,n=e.options,a=e.defaultValue,i=e.value,l=e.onChange,f=e.closeOnChange,j=void 0===f||f,O=e.className,v=e.splitIn,m=e.disabled,p=Object(r.useState)(!1),k=Object(c.a)(p,2),h=k[0],g=k[1],C=Object(d.a)(i||a),T=Object(c.a)(C,2),y=T[0],x=T[1],S=Object(r.useMemo)((function(){return Array.isArray(n)?n.map((function(e,t){return"object"===typeof e?e:{title:e,value:t}})):[]}),[n]),N=Object(r.useMemo)((function(){return S.find((function(e){return e.value===y}))}),[S,y]),w=Object(r.useCallback)((function(e){x(e),null===l||void 0===l||l(e),j&&g(!1)}),[x,l,j]),E=Object(r.useCallback)((function(e){return function(t){t&&w(e.value)}}),[w]);return Object(s.jsx)(o.a,{open:h,onToggle:g,title:t,subtitle:null===N||void 0===N?void 0:N.title,className:O,disabled:m,children:Object(s.jsx)("div",{className:"flex flex-wrap",children:u()(S,(function(e){return Object(s.jsx)(b,{className:v?"w-1/".concat(v):"w-full",checked:e.value===y,onChange:E(e),children:e.title},e.value)}))})})}},935:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var c=n(13),r=n(52),a=n(2),u=n(257),o=n.n(u),i=n(46),l=n.n(i),s=n(899),b=n(916),d=n(255),f=n(32);var j=function(e,t,n){var c=Object(f.h)(),r=Object(a.useCallback)((function(){return c.location.hash.includes(e)}),[e,c]),u=Object(a.useCallback)((function(){r()||c.push({hash:e,state:c.location.state,search:c.location.search,pathname:c.location.pathname}),null===n||void 0===n||n()}),[e,r,c,n]),o=Object(a.useCallback)((function(){r()&&c.goBack(),null===t||void 0===t||t()}),[r,c,t]);return Object(a.useEffect)((function(){var e=setTimeout((function(){r()?u():o()}),100);return function(){clearTimeout(e)}}),[r,u,o,c.location.hash]),Object(a.useMemo)((function(){return{open:u,close:o}}),[u,o])},O=n(3),v=["visible","onClose","children","className","closeButton"],m=function(e){var t=e.visible,n=e.onClose,u=e.children,i=e.className,f=e.closeButton,m=void 0===f?"Blue":f,p=Object(r.a)(e,v),k=Object(a.useMemo)((function(){return o.a.add({})}),[]),h=Object(a.useCallback)((function(){n()}),[n]),g=Object(a.useCallback)((function(){if(t)return h(),!1}),[t,h]),C=Object(a.useCallback)((function(){if(!o.a.focus(k)){var e=o.a.getCurrent();e&&e.blur(),o.a.setActiveContainer(k),setTimeout((function(){o.a.setPointerMode(!1),o.a.focus(k)}),500)}}),[k]),T=Object(a.useCallback)((function(){var e=o.a.getCurrent();requestAnimationFrame((function(){null===e||void 0===e||e.scrollIntoViewIfNeeded()}))}),[]);Object(d.a)("Back",g),Object(d.a)("ArrowUp",T),Object(d.a)("ArrowDown",T),Object(d.a)(m,g);var y=j("popup",g);return Object(a.useEffect)((function(){t?(C(),y.open()):y.close()}),[t,C,y]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:l()("fixed z-999 top-0 left-0 right-0 bottom-0 bg-black bg-opacity-50",{hidden:!t}),onClick:h}),Object(O.jsx)(b.a,Object(c.a)(Object(c.a)({},p),{},{spotlightId:k,spotlightRestrict:"self-only",spotlightDisabled:!t,className:l()("fixed z-999 bottom-0 left-0 right-0 p-4 bg-black ring",{hidden:!t},i),children:Object(O.jsx)(s.a,{className:"max-h-screen",children:u})}))]})}},945:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(958),r=n.n(c);function a(e){return r()(1e3*(e||0),{leading:!0})}},946:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return j}));var c=n(910),r=n.n(c),a=n(199),u=n.n(a),o=n(947),i=n.n(o),l=n(963),s=n.n(l),b=function(e){return e<10?"0".concat(e):e};function d(e,t,n){return u()(e,(function(e,c){var a,u,o,i,l,d,f,j=r()([(null===(a=e.type)||void 0===a?void 0:a.title)&&(null===(u=e.author)||void 0===u?void 0:u.title)?"".concat(null===(o=e.type)||void 0===o?void 0:o.title,"."):null===(i=e.type)||void 0===i?void 0:i.title,null===(l=e.author)||void 0===l?void 0:l.title,(null===(d=e.type)||void 0===d?void 0:d.title)||(null===(f=e.author)||void 0===f?void 0:f.title)?"(".concat(s()(e.lang),")"):s()(e.lang),"ac3"===e.codec&&s()(e.codec)]).join(" ");return{name:j,number:"".concat(b(c+1),"."),lang:e.lang,default:n&&n===j||!n&&t&&"ac3"===e.codec}}))}function f(e,t,n){return i()(u()(e,(function(e){var c="string"===typeof e.url?e.url:e.url[t]||e.url.http,r=e.quality;return{src:c,name:r,type:c.includes(".m3u8")?"application/x-mpegURL":"video/mp4",default:n===r}})),(function(e){var t=e.name;return parseInt(t)}),"desc")}function j(e,t,n){return u()(e,(function(e,c){var r="".concat(s()(e.lang)).concat(e.forced?" Forced":"");return{name:r,number:"".concat(b(c+1),"."),src:e.url,lang:e.lang,default:n&&n===r||!n&&t&&e.forced&&"rus"===e.lang}}))}},966:function(e,t,n){"use strict";n.d(t,"a",(function(){return X}));var c=n(13),r=n(29),a=n.n(r),u=n(54),o=n(51),i=n(52),l=n(2),s=n.n(l),b=n(976),d=n.n(b),f=n(257),j=n.n(f),O=n(900),v=n(268),m=n(3),p=["onClick"],k=function(e){var t=e.onClick,n=Object(i.a)(e,p),r=Object(l.useCallback)((function(e){Object(v.c)("Back"),null===t||void 0===t||t(e)}),[t]);return Object(m.jsx)(O.a,Object(c.a)(Object(c.a)({icon:"arrow_back"},n),{},{onClick:r}))},h=n(95),g=n(46),C=n.n(g),T=n(978),y=n.n(T),x=n(979),S=n.n(x),N=n(912),w=n.n(N),E=n(260),R=n(91),A=n(92),L=function(){function e(t){Object(R.a)(this,e),this.resource=void 0,this.objectURL=void 0,this.resource=t}return Object(A.a)(e,[{key:"blobToBuffer",value:function(){var e=this;return new Promise((function(t,n){var c=new FileReader;c.addEventListener("loadend",(function(e){var n,c=null===(n=e.target)||void 0===n?void 0:n.result;t(new Uint8Array(c))})),c.addEventListener("error",(function(){return n("Error while reading the Blob object")})),c.readAsArrayBuffer(e.resource)}))}},{key:"getURL",value:function(){var t=this;return new Promise((function(n,c){return t.resource instanceof Blob?FileReader?TextDecoder?e.blobToString(t.resource,(function(c){var r="WEBVTT FILE\r\n\r\n".concat(e.toVTT(c)),a=new Blob([r],{type:"text/vtt"});return t.objectURL=URL.createObjectURL(a),n(t.objectURL)}),(function(){t.blobToBuffer().then((function(c){var r=new TextDecoder("utf-8").decode(c),a="WEBVTT FILE\r\n\r\n".concat(e.toVTT(r)),u=new Blob([a],{type:"text/vtt"});return t.objectURL=URL.createObjectURL(u),n(t.objectURL)}))})):c("No TextDecoder constructor found"):c("No FileReader constructor found"):c("Expecting resource to be a Blob but something else found.")}))}},{key:"release",value:function(){URL.createObjectURL(this.objectURL)}}],[{key:"blobToString",value:function(e,t,n){var c=new FileReader;c.addEventListener("loadend",(function(e){var n,c=null===(n=e.target)||void 0===n?void 0:n.result;t(c)})),c.addEventListener("error",(function(){return n()})),c.readAsText(e)}},{key:"toVTT",value:function(e){return e.replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").concat("\r\n\r\n")}},{key:"toTypedArray",value:function(e){var t=[];return e.split("").forEach((function(e){t.push(parseInt("".concat(e.charCodeAt(0)),16))})),Uint8Array.from(t)}}]),e}();function I(){return(I=Object(u.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.blob();case 4:return n=e.sent,c=new L(n),e.abrupt("return",c.getURL());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=["autoPlay","audioTracks","sourceTracks","subtitleTracks","streamingType","isSettingsOpen","onUpdate","onAudioChange","onSourceChange","onSubtitleChange","className","mediaComponent"];function U(e){var t=e.autoPlay,n=e.audioTracks,c=e.sourceTracks,r=e.subtitleTracks,a=e.streamingType,u=e.isSettingsOpen,i=e.onAudioChange,s=e.onSourceChange,b=e.onSubtitleChange,d=Object(l.useRef)(null),f=Object(l.useRef)(null),j=Object(l.useRef)(0),O=Object(l.useRef)(!1),v=Object(l.useState)(!1),m=Object(o.a)(v,2),p=m[0],k=m[1],h=Object(E.a)("is_hls.js_active"),g=Object(o.a)(h,1)[0],C=Object(l.useState)((function(){return(null===n||void 0===n?void 0:n.find((function(e){return e.default})))||(null===n||void 0===n?void 0:n[0])})),T=Object(o.a)(C,2),x=T[0],N=T[1],R=Object(l.useState)((function(){return(null===c||void 0===c?void 0:c.find((function(e){return e.default})))||(null===c||void 0===c?void 0:c[0])})),A=Object(o.a)(R,2),L=A[0],P=A[1],U=Object(l.useState)((function(){return(null===r||void 0===r?void 0:r.find((function(e){return e.default})))||null})),M=Object(o.a)(U,2),V=M[0],B=M[1],F=Object(l.useCallback)((function(){return"hls2"===a?[]:n}),[n,a]),_=Object(l.useCallback)((function(){return null===x||void 0===x?void 0:x.name}),[x]),D=Object(l.useCallback)((function(e){var t,c=null!==(t=null===n||void 0===n?void 0:n.findIndex((function(t){return t.name===e})))&&void 0!==t?t:-1;if(-1!==c){var r=n[c];N(r),null===i||void 0===i||i(r)}}),[n,i]),W=Object(l.useCallback)((function(){return w()(c,"src")}),[c]),$=Object(l.useCallback)((function(){return null===L||void 0===L?void 0:L.name}),[L]),z=Object(l.useCallback)((function(e){var t,n=null!==(t=null===c||void 0===c?void 0:c.findIndex((function(t){return t.name===e})))&&void 0!==t?t:-1;if(-1!==n){var r=c[n];P(r),null===s||void 0===s||s(r)}}),[c,s]),H=Object(l.useCallback)((function(){return r}),[r]),q=Object(l.useCallback)((function(){return null===V||void 0===V?void 0:V.name}),[V]),J=Object(l.useCallback)((function(e){var t,n=null!==(t=null===r||void 0===r?void 0:r.findIndex((function(t){return t.name===e})))&&void 0!==t?t:-1,c=-1!==n&&r[n]||null;B(c),null===b||void 0===b||b(c)}),[r,b]),K=Object(l.useMemo)((function(){var e;return null!==(e=null===n||void 0===n?void 0:n.findIndex((function(e){return e.name===x.name})))&&void 0!==e?e:0}),[n,x]),G=Object(l.useMemo)((function(){return"hls"===a?null===L||void 0===L?void 0:L.src.replace(/master-v1a\d/,"master-v1a".concat(K+1)):null===L||void 0===L?void 0:L.src}),[a,K,null===L||void 0===L?void 0:L.src]),Q=Object(l.useCallback)((function(){d.current&&(k(!0),d.current.removeEventListener("canplay",Q),j.current>0?(d.current.currentTime=j.current,O.current?d.current.pause():d.current.play()):t&&!O.current&&d.current.play())}),[t]);return Object(l.useEffect)((function(){if(d.current&&G){if(!1!==g&&G.includes(".m3u8")&&y.a.isSupported()){var e=f.current=new y.a({enableWebVTT:!1,enableCEA708Captions:!1});e.attachMedia(d.current),e.on(y.a.Events.MEDIA_ATTACHED,(function(){e.loadSource(G)}))}else d.current.src=G;k(!1),d.current.addEventListener("canplay",Q)}return function(){d.current&&(d.current.currentTime>0&&(j.current=d.current.currentTime),d.current.removeEventListener("canplay",Q)),f.current&&(f.current.destroy(),f.current=null)}}),[G,g,Q]),Object(l.useEffect)((function(){if(p)if(f.current){var e,t=null===(e=f.current.audioTracks)||void 0===e?void 0:e[K];t&&(f.current.audioTrack=t.id)}else if(d.current){var n;(null===(n=d.current.audioTracks)||void 0===n?void 0:n[K])&&(S()(d.current.audioTracks,(function(e,t){e.enabled=t===K})),d.current.currentTime-=1)}}),[p,K]),Object(l.useEffect)((function(){if(p&&d.current){for(;d.current.firstChild;)d.current.lastChild.track.mode="disabled",d.current.removeChild(d.current.lastChild);if(V){var e=function(e){if(d.current){var t=document.createElement("track");d.current.appendChild(t),t.src=e,t.kind="captions",t.id=V.name,t.label=V.name,t.srclang=V.lang,t.track.mode="showing"}};V.src.endsWith(".srt")?function(e){return I.apply(this,arguments)}(V.src).then(e):e(V.src)}}}),[p,V]),Object(l.useEffect)((function(){O.current=Boolean(u)}),[u]),Object(l.useMemo)((function(){return{videoRef:d,getAudioTracks:F,getAudioTrack:_,setAudioTrack:D,getSourceTracks:W,getSourceTrack:$,setSourceTrack:z,getSubtitleTracks:H,getSubtitleTrack:q,setSubtitleTrack:J}}),[d,F,_,D,W,$,z,H,q,J])}var M=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],V=s.a.forwardRef((function(e,t){var n=e.autoPlay,r=e.audioTracks,o=e.sourceTracks,s=e.subtitleTracks,b=e.streamingType,d=e.isSettingsOpen,f=e.onUpdate,j=e.onAudioChange,O=e.onSourceChange,v=e.onSubtitleChange,p=e.className,k=(e.mediaComponent,Object(i.a)(e,P)),g=Object(l.useCallback)((function(){null===f||void 0===f||f()}),[f]),T=Object(l.useMemo)((function(){return M.reduce((function(e,t){return Object(c.a)(Object(c.a)({},e),{},Object(h.a)({},t,(function(){var e;g();for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];null===(e=k[t])||void 0===e||e.call.apply(e,[k].concat(c))})))}),{})}),[k,g]),y=function(e,t){var n=U(t),c=n.videoRef,r=Object(l.useCallback)((function(){return c.current?c.current.currentTime:0}),[c]),o=Object(l.useCallback)((function(e){c.current&&(c.current.currentTime=e)}),[c]),i=Object(l.useCallback)((function(){return c.current?c.current.playbackRate:1}),[c]),s=Object(l.useCallback)((function(e){c.current&&(c.current.playbackRate=e)}),[c]),b=Object(l.useCallback)((function(){return!!c.current&&c.current.paused}),[c]),d=Object(l.useCallback)((function(){return c.current?c.current.duration:0}),[c]),f=Object(l.useCallback)((function(){return!!c.current&&c.current.networkState===c.current.NETWORK_NO_SOURCE}),[c]),j=Object(l.useCallback)((function(){return!c.current||c.current.readyState<c.current.HAVE_ENOUGH_DATA}),[c]),O=Object(l.useCallback)((function(){return c.current?c.current.buffered.length&&c.current.buffered.end(c.current.buffered.length-1)/c.current.duration:0}),[c]),v=Object(l.useCallback)((function(){return c.current?c.current.currentTime/c.current.duration:0}),[c]),m=Object(l.useCallback)(Object(u.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=c.current)||void 0===t?void 0:t.play();case 2:case"end":return e.stop()}}),e)}))),[c]),p=Object(l.useCallback)((function(){var e;null===(e=c.current)||void 0===e||e.pause()}),[c]),k=Object(l.useCallback)(Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b()){e.next=5;break}return e.next=3,m();case 3:e.next=6;break;case 5:p();case 6:case"end":return e.stop()}}),e)}))),[m,p,b]),h=Object(l.useCallback)((function(){var e;null===(e=c.current)||void 0===e||e.load()}),[c]),g=Object(l.useMemo)((function(){return{play:m,pause:p,playPause:k,load:h,get currentTime(){return r()},set currentTime(e){o(e)},get audioTracks(){return n.getAudioTracks()},get audioTrack(){return n.getAudioTrack()},set audioTrack(e){n.setAudioTrack(e)},get sourceTracks(){return n.getSourceTracks()},get sourceTrack(){return n.getSourceTrack()},set sourceTrack(e){n.setSourceTrack(e)},get subtitleTracks(){return n.getSubtitleTracks()},get subtitleTrack(){return n.getSubtitleTrack()},set subtitleTrack(e){n.setSubtitleTrack(e)},get playbackRate(){return i()},set playbackRate(e){s(e)},get paused(){return b()},get duration(){return d()},get error(){return f()},get loading(){return j()},get proportionLoaded(){return O()},get proportionPlayed(){return v()}}}),[n,m,p,k,h,r,o,i,s,b,d,f,j,O,v]);return Object(l.useImperativeHandle)(e,(function(){return g}),[g]),Object(l.useMemo)((function(){return{api:g,player:n}}),[g,n])}(t,{autoPlay:n,audioTracks:r,sourceTracks:o,subtitleTracks:s,streamingType:b,isSettingsOpen:d,onAudioChange:j,onSourceChange:O,onSubtitleChange:v}).player;return Object(m.jsx)("video",Object(c.a)(Object(c.a)(Object(c.a)({},k),T),{},{autoPlay:!1,className:C()("w-screen h-screen",p),ref:y.videoRef}))})),B=n(253),F=n(255),_=n(107),D=n(199),W=n.n(D),$=n(935),z=n(934),H="NONE",q=function(e){var t=e.visible,n=e.onClose,c=e.player,r=Object(l.useState)(t),a=Object(o.a)(r,2),u=a[0],i=a[1],s=Object(l.useState)([]),b=Object(o.a)(s,2),d=b[0],f=b[1],j=Object(l.useState)(null),O=Object(o.a)(j,2),v=O[0],p=O[1],k=Object(l.useState)([]),h=Object(o.a)(k,2),g=h[0],C=h[1],T=Object(l.useState)(null),y=Object(o.a)(T,2),x=y[0],S=y[1],N=Object(l.useState)([]),w=Object(o.a)(N,2),E=w[0],R=w[1],A=Object(l.useState)(H),L=Object(o.a)(A,2),I=L[0],P=L[1],U=Object(l.useMemo)((function(){return W()(d,(function(e){return{title:"".concat(e.number," ").concat(e.name),value:e.name}}))}),[d]),M=Object(l.useMemo)((function(){return W()(g,(function(e){return{title:e.name,value:e.name}}))}),[g]),V=Object(l.useMemo)((function(){return[{title:"\u041d\u0435\u0442",value:H}].concat(Object(_.a)(W()(E,(function(e){return{title:"".concat(e.number," ").concat(e.name),value:e.name}}))))}),[E]),B=Object(l.useCallback)((function(e,t){c.current&&(c.current.getVideoNode()[e]=t)}),[c]),F=Object(l.useCallback)((function(e){p(e),B("audioTrack",e)}),[B]),D=Object(l.useCallback)((function(e){S(e),B("sourceTrack",e)}),[B]),q=Object(l.useCallback)((function(e){P(e),B("subtitleTrack",e)}),[B]),J=Object(l.useCallback)((function(){n()}),[n]);return Object(l.useEffect)((function(){if(t&&c.current){var e=c.current.getVideoNode(),n=e.audioTracks,r=e.audioTrack,a=e.sourceTracks,u=e.sourceTrack,o=e.subtitleTracks,i=e.subtitleTrack;(null===n||void 0===n?void 0:n.length)>1||(null===a||void 0===a?void 0:a.length)>1||(null===o||void 0===o?void 0:o.length)>0?(f(n),p(r),C(a),S(u),R(o),P(i||H)):J()}}),[t,c,J]),Object(l.useEffect)((function(){var e;return t?e=setTimeout((function(){i(!0)}),100):i(!1),function(){clearTimeout(e)}}),[t]),Object(m.jsxs)($.a,{visible:u,onClose:J,children:[U.length>1&&Object(m.jsx)(z.a,{className:"my-1",label:"\u0417\u0432\u0443\u043a",value:v,options:U,onChange:F,splitIn:2}),M.length>1&&Object(m.jsx)(z.a,{className:"my-1",label:"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e",value:x,options:M,onChange:D,splitIn:4}),V.length>1&&Object(m.jsx)(z.a,{className:"my-1",label:"\u0421\u0443\u0431\u0442\u0438\u0442\u0440\u044b",value:I,options:V,onChange:q,splitIn:4})]})},J=n(916),K=n(945),G=function(e){var t=e.startTime,n=e.startInDelay,c=void 0===n?5:n,r=e.player,a=Object(l.useState)(!0),u=Object(o.a)(a,2),i=u[0],s=u[1],b=Object(l.useState)(c),d=Object(o.a)(b,2),f=d[0],j=d[1],v=Object(l.useMemo)((function(){return Object(K.a)(t)}),[t]),p=Object(l.useCallback)((function(){r.current&&(s(!1),r.current.getVideoNode().currentTime=t)}),[t,r]),k=Object(l.useCallback)((function(){s(!1)}),[]);return Object(l.useEffect)((function(){var e;return i&&(e=setInterval((function(){j((function(e){var t=e-1;return t<=0&&p(),t}))}),1e3)),function(){clearInterval(e)}}),[i,p]),t&&i?Object(m.jsxs)(J.a,{spotlightRestrict:"self-only",className:"flex justify-center absolute w-full z-101 bottom-32",children:[Object(m.jsxs)(O.a,{onClick:p,children:["\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441 ",v," \u0447\u0435\u0440\u0435\u0437 ",f]}),Object(m.jsx)(O.a,{autoFocus:!0,onClick:k,children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441 \u043d\u0430\u0447\u0430\u043b\u0430"})]}):null},Q=["title","description","poster","audios","sources","subtitles","startTime","timeSyncInterval","streamingType","onPlay","onPause","onEnded","onTimeSync"],X=function(e){var t=e.title,n=e.description,r=e.poster,s=e.audios,b=e.sources,f=e.subtitles,v=e.startTime,p=e.timeSyncInterval,h=void 0===p?30:p,g=e.streamingType,C=e.onPlay,T=e.onPause,y=e.onEnded,x=e.onTimeSync,S=Object(i.a)(e,Q),N=Object(l.useRef)(),w=Object(l.useState)(!0),R=Object(o.a)(w,2),A=R[0],L=R[1],I=Object(l.useState)(!1),P=Object(o.a)(I,2),U=P[0],M=P[1],_=Object(l.useState)(!1),D=Object(o.a)(_,2),W=D[0],$=D[1],z=Object(E.a)("is_pause_by_ok_click_active"),H=Object(o.a)(z,1)[0],J=Object(l.useCallback)((function(){L(!1),$(!1),null===C||void 0===C||C()}),[C]),K=Object(l.useCallback)((function(e){L(!0),null===T||void 0===T||T(e.currentTime)}),[T]),X=Object(l.useCallback)((function(e){var t=j.a.getCurrent();if((!t||!t.offsetHeight||!t.offsetWidth)&&N.current&&H)return N.current.getVideoNode().playPause(),!1}),[N,H]),Y=Object(l.useCallback)((function(e){null===y||void 0===y||y(e.target.currentTime)}),[y]),Z=Object(l.useCallback)(Object(u.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N.current||!x){e.next=5;break}return t=N.current.getVideoNode(),n=t.currentTime,e.next=5,x(n);case 5:case"end":return e.stop()}}),e)}))),[x,N]),ee=Object(l.useCallback)((function(){M(!0)}),[]),te=Object(l.useCallback)((function(){N.current&&($(!0),N.current.getVideoNode().pause())}),[N]),ne=Object(l.useCallback)((function(){N.current&&($(!1),N.current.getVideoNode().play())}),[]),ce=Object(l.useCallback)((function(){N.current&&N.current.getVideoNode().pause()}),[N]);return Object(l.useEffect)((function(){var e;return A&&(e=setTimeout((function(){L(!1)}),5e3)),function(){e&&clearTimeout(e)}}),[A]),Object(l.useEffect)((function(){var e;return x&&(e=setInterval(Z,1e3*h)),function(){e&&clearInterval(e)}}),[h,x,Z]),Object(F.a)("Back",Z),Object(F.a)("Blue",te),Object(F.a)("Play",ne),Object(F.a)("Pause",ce),Object(F.a)("Enter",X),Object(F.a)("ArrowUp",te),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(q,{visible:W,onClose:ne,player:N}),A&&Object(m.jsxs)("div",{className:"absolute z-10 top-0 px-4 pt-2 flex items-center",children:[Object(m.jsx)(k,{className:"mr-2"}),Object(m.jsx)(B.a,{children:t})]}),A&&Object(m.jsx)(O.a,{className:"absolute z-101 bottom-8 right-10 text-blue-600",icon:"settings",onClick:te}),U&&v>0&&Object(m.jsx)(G,{startTime:v,player:N}),Object(m.jsx)(d.a,Object(c.a)(Object(c.a)({},S),{},{ref:N,locale:"ru",poster:r,title:n,jumpBy:15,onPlay:J,onPause:K,onEnded:Y,onLoadedMetadata:ee,streamingType:g,isSettingsOpen:W,audioTracks:s,sourceTracks:b,subtitleTracks:f,videoComponent:Object(m.jsx)(V,{})}))]})}}}]);
//# sourceMappingURL=20.c2d496f7.chunk.js.map
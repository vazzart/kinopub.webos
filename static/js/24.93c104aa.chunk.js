(this["webpackJsonpkinopub.webos"]=this["webpackJsonpkinopub.webos"]||[]).push([[24],{1109:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var c=n(59),r=n(2),a=n(32),i=n(198),o=n.n(i),u=n(984),l=n(264),s=n(895),b=n(253),j=n(107),d=n(55),f=n.n(d),O=n(255),v=n(898),m=n(6),h=n(903),x=n(3),p=function(e){var t=e.collection,n=e.className,c=Object(a.h)(),i=Object(r.useMemo)((function(){return(null===t||void 0===t?void 0:t.views)&&Object(h.a)(null===t||void 0===t?void 0:t.views)||""}),[null===t||void 0===t?void 0:t.views]),o=Object(r.useCallback)((function(){(null===t||void 0===t?void 0:t.id)&&c.push(Object(m.b)(m.a.Collection,{collectionId:t.id}),{collection:t,title:t.title})}),[t,c]);return Object(x.jsx)(v.a,{onClick:o,source:null===t||void 0===t?void 0:t.posters.medium,caption:null===t||void 0===t?void 0:t.title,className:f()("h-72",n),children:i&&Object(x.jsxs)("div",{className:"absolute top-2 right-2 h-6 pr-2 text-xs text-gray-200 bg-black bg-opacity-50 rounded flex items-center",children:[Object(x.jsx)(O.a,{name:"visibility"}),i]})})},N=n(894),g=n(896),w=function(e){var t=e.title,n=e.collections,c=e.loading,r=e.onScrollToEnd,a=e.scrollable,i=void 0===a||a,u=Object(x.jsxs)("div",{children:[Object(x.jsx)(g.a,{children:t}),Object(x.jsxs)("div",{className:"flex flex-wrap pr-2",children:[o()(n,(function(e){return Object(x.jsx)(p,{collection:e},e.id)})),c&&o()(Object(j.a)(new Array(15)),(function(e,t){return Object(x.jsx)(p,{},t)}))]})]});return i?Object(x.jsx)(N.b,{onScrollToEnd:r,children:u}):u},C=n(920),y=function(e){var t=e.title,n=e.queryResult,r=e.processItems,a=Object(C.a)(n,r),i=Object(c.a)(a,3),o=i[0],u=i[1],l=i[2];return Object(x.jsx)(w,{title:t,collections:o,loading:u,onScrollToEnd:l})},k=n(921),E={created:"\u041d\u043e\u0432\u044b\u0435",watchers:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435",views:"\u041f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c\u044b\u0435"},R=function(){var e=Object(a.j)().collectionType,t=void 0===e?"created":e,n=Object(r.useState)(""),i=Object(c.a)(n,2),j=i[0],d=i[1],f=Object(k.a)("collections",[j,"".concat(t,"-")]),O=function(e){return(e?E[e]:e)||""}(t),v=Object(r.useCallback)((function(e){d(e)}),[d]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(s.a,{title:"\u041f\u043e\u0434\u0431\u043e\u0440\u043a\u0438: ".concat(O)}),Object(x.jsx)(y,{title:Object(x.jsxs)("div",{className:"w-full",children:[Object(x.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[Object(x.jsx)(b.a,{children:O}),Object(x.jsx)("div",{className:"flex",children:o()(E,(function(e,n){return Object(x.jsx)(l.a,{className:"mr-2",replace:!0,active:t===n,href:Object(m.b)(m.a.Collections,{collectionType:n}),children:e},n)}))})]}),Object(x.jsx)("div",{className:"mr-2",children:Object(x.jsx)(u.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0438...",value:j,onChange:v})})]}),queryResult:f})]})}},894:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return O}));var c=n(12),r=n(60),a=n(2),i=n(55),o=n.n(i),u=n(59),l=n(108),s=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{disconnectOnLeave:!1},r=t.onEnterViewport,i=t.onLeaveViewport,o=Object(a.useState)(),s=Object(u.a)(o,2),b=s[1],j=Object(a.useRef)(null),d=Object(a.useRef)(!1),f=Object(a.useRef)(!1),O=Object(a.useRef)(0),v=Object(a.useRef)(0),m=Object(a.useCallback)((function(){if(e.current&&j.current){var t=Object(l.findDOMNode)(e.current);t&&j.current.observe(t)}}),[e,j]),h=Object(a.useCallback)((function(){if(e.current&&j.current){var t=Object(l.findDOMNode)(e.current);t&&(j.current.unobserve(t),j.current.disconnect(),j.current=null)}}),[e,j]),x=Object(a.useCallback)((function(e){var t=e[0]||{},n=t.isIntersecting,a=t.intersectionRatio,o="undefined"!==typeof n?n:a>0;if(!f.current&&o)return f.current=!0,null===r||void 0===r||r(),O.current+=1,d.current=o,void b(o);f.current&&!o&&(f.current=!1,null===i||void 0===i||i(),c.disconnectOnLeave&&j.current&&j.current.disconnect(),v.current+=1,d.current=o,b(o))}),[j,c.disconnectOnLeave,r,i]),p=Object(a.useCallback)((function(){j.current||(j.current=new IntersectionObserver(x,n))}),[j,n,x]);return Object(a.useEffect)((function(){return p(),m(),function(){h()}}),[p,m,h]),{inViewport:d.current,enterCount:O.current,leaveCount:v.current}},b=n(1104);var j=function(e){var t=Object(b.a)();return Object(a.useMemo)((function(){return"".concat(e,"-").concat(t)}),[e,t])},d=n(3),f=["children","className","onScrollToEnd"],O=Object(a.createContext)({}),v=function(e){var t=e.children,n=e.className,i=e.onScrollToEnd,u=Object(r.a)(e,f),l=Object(a.useRef)(null),b=j("scrollable"),v=Object(a.useMemo)((function(){return{id:b}}),[b]);return s(l,{onEnterViewport:i}),Object(d.jsxs)("div",Object(c.a)(Object(c.a)({className:o()("overflow-y-auto h-full",n)},u),{},{id:b,children:[Object(d.jsx)(O.Provider,{value:v,children:t}),i&&Object(d.jsx)("div",{className:"h-40",ref:l})]}))}},895:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(12),r=n(899),a=n(3),i=function(e){return Object(a.jsx)(r.a,Object(c.a)({defaultTitle:"Unknown",titleTemplate:"%s | Kinopub WebOS"},e))}},896:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n(12),r=n(60),a=n(55),i=n.n(a),o=n(253),u=n(3),l=["children","className"],s=function(e){var t=e.children,n=e.className,a=Object(r.a)(e,l);return t?Object(u.jsx)(o.a,Object(c.a)(Object(c.a)({},a),{},{className:i()("flex justify-between items-center m-1 mb-3 min-h-9",n),as:"div",children:t})):null}},898:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var c=n(12),r=n(60),a=n(55),i=n.n(a),o=n(2),u=n(919),l=n.n(u),s=n(894),b=n(3),j=function(e){var t=Object(o.useContext)(s.a).id;return Object(b.jsx)(l.a,Object(c.a)(Object(c.a)({once:!0,offset:100,scrollContainer:t&&"#".concat(t)},e),{},{placeholder:Object(b.jsx)("div",{className:"w-full h-full"})}))};var d=j,f=n(254),O=["className","wrapperClassName","source","caption","children"],v=function(e){var t=e.className,n=e.wrapperClassName,a=e.source,o=e.caption,u=e.children,l=Object(r.a)(e,O);return Object(b.jsxs)(f.a,Object(c.a)(Object(c.a)({},l),{},{className:i()("rounded-xl w-1/5 cursor-pointer",n),children:[Object(b.jsxs)(d,{className:i()("h-40 m-1 flex flex-col relative",t),children:[Object(b.jsx)("img",{loading:"lazy",className:"w-full h-full object-cover rounded-xl border-2 border-gray-300 bg-gray-300",src:a,alt:o}),u]}),o&&Object(b.jsx)("div",{className:"px-2",children:Object(b.jsx)("p",{className:"text-gray-200 text-sm text-center overflow-hidden overflow-ellipsis whitespace-nowrap",children:o})})]}))}},903:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(908),r=n.n(c);function a(e){return r()(e)}},920:function(e,t,n){"use strict";var c=n(59),r=n(2),a=n(909),i=n.n(a),o=n(927),u=n.n(o),l=n(918),s=n.n(l);t.a=function(e,t){var n=e.data,a=e.isLoading,o=e.isFetchingNextPage,l=e.fetchNextPage,b=Object(r.useState)(!1),j=Object(c.a)(b,2),d=j[0],f=j[1],O=Object(r.useMemo)((function(){return s()(i()(u()(null===n||void 0===n?void 0:n.pages,(function(e){return e.items}))),"id")}),[null===n||void 0===n?void 0:n.pages]),v=Object(r.useMemo)((function(){return t?t(O):O}),[O,t]),m=Object(r.useCallback)((function(){d&&(l(),f(!1))}),[d,l]);return Object(r.useEffect)((function(){f(!0)}),[O.length]),[v,a||o,m]}},921:function(e,t,n){"use strict";var c=n(12),r=n(107),a=n(2),i=n(982),o=n(252);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,u=Object(a.useMemo)((function(){return new o.c}),[]),l=Object(i.a)([e].concat(Object(r.a)(t)),(function(n){var c=n.pageParam;return u[e].apply(u,Object(r.a)(t).concat([c]))}),Object(c.a)({getNextPageParam:function(e){var t;return(null===e||void 0===e||null===(t=e.pagination)||void 0===t?void 0:t.current)+1||1}},n));return l}},984:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var c=n(12),r=n(60),a=n(2),i=n(108),o=n(1005),u=n.n(o),l=n(55),s=n.n(l),b=n(3),j=["className","onChange","autoFocus"],d=function(e){var t=e.className,n=e.onChange,o=e.autoFocus,l=Object(r.a)(e,j),d=Object(a.useRef)(null),f=Object(a.useCallback)((function(e){var t=e.value;null===n||void 0===n||n(t)}),[n]);return Object(a.useEffect)((function(){var e;return o&&(e=requestAnimationFrame((function(){var e,t=Object(i.findDOMNode)(d.current);null===t||void 0===t||null===(e=t.querySelector("input"))||void 0===e||e.focus()}))),function(){e&&cancelAnimationFrame(e)}}),[d,o]),Object(b.jsx)(u.a,Object(c.a)(Object(c.a)({},l),{},{ref:d,className:s()("w-full",t),onChange:f}))}}}]);
//# sourceMappingURL=24.93c104aa.chunk.js.map